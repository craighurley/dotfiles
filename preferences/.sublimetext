#!/usr/bin/env bash

###############################################################################
# Sublime Text
###############################################################################

sublimeDir=$HOME/Library/Application\ Support/Sublime\ Text\ 3/Packages/User/
preferencesSource=$HOME/Projects/dotfiles/applications/sublimetext/Preferences.sublime-settings
preferencesTarget=$HOME/Library/Application\ Support/Sublime\ Text\ 3/Packages/User/Preferences.sublime-settings
packageControlSource=$HOME/Projects/dotfiles/applications/sublimetext/Package\ Control.sublime-settings
packageControlTarget=$HOME/Library/Application\ Support/Sublime\ Text\ 3/Packages/User/Package\ Control.sublime-settings

read -r -p "Have you installed package control in Sublime Text? (y/n) " -n 1
if [[ $REPLY =~ ^[Yy]$ ]] ; then
    [[ ! -d "$sublimeDir" ]] && mkdir -p "$sublimeDir"
    [[ -f "$preferencesSource" ]] && ln -f -s "$preferencesSource" "$preferencesTarget"
    [[ -f "$packageControlSource" ]] && ln -f -s "$packageControlSource" "$packageControlTarget"
    echo "Done; note you may have to temporarily remove 'color_scheme' from the preferences file while package are auto installed."
else
    echo "Skipped."
fi

#TODO
#git clone https://github.com/craighurley/sublime-insert-date-time.git ~/Library/Application\ Support/Sublime\ Text\ 3/Packages/sublime-insert-date-time
#git clone https://github.com/craighurley/sublime-xml-lint.git ~/Library/Application\ Support/Sublime\ Text\ 3/Packages/sublime-xml-lint
